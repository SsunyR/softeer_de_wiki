# 0806 AWS 강의

## Serverless

- 서버리스는 서버에 대한 걱정 없이 이용할 수 있는 서비스를 의미한다.
- 실제로 서버가 없는 것은 아님.
- 첫 인스턴스 실행 = cold start

## Amazon Lambda

- Serverless

- 로직 = handler
- handler를 부르는 행위 = event를 invoke 한다.
- 걸린 시간 = context

- Stateless: 상태를 저장하지 않는다. (log를 따로 남겨야 된다)
-> 인스턴스에 있는 스토리지? -> 인스턴스가 달라지면 못찾음 -> 영향을 받지 않는 공간에 로그를 저장해야 한다.

- 서버의 성능은 메모리로 조정
  - 최적의 메모리 크기를 테스트로 찾아야 함 (메모리를 늘려도 성능 향상이 더딘 구간)
- 서버의 권한 = role을 통해

- Lambda 내 두가지 권한(IAM)
  - 이용자의 Lambda 실행 권한
  - Lambda의 log writing 수행 권한 (Cloud watch, S3 등)

## API Gateway

- Serverless

- 요청을 처리하는 명세 (실제 처리 코드는 Lambda)
  - e.g. Spring: @Controller(/ GET) - API Gateway / String getMethod(){} - Lambda
- API 서버를 추상화(실제 서버는 X, but 요청을 처리)

## DynamoDB

- Serverless
- NoSQL DB
- DB 없이 table 만 생성
- table 간에는 아무런 연관 X
- PK = Partition Key, 보조 키 = Sort Key
  - (PK + SK) 유일함
  - PK 와 SK가 둘 다 존재 -> 중복된 PK 가능
  - [PK, SK] 순서로 정렬 -> 효율적인 검색 고려
- Local index, Global index
  - Local index = PK, SK 순서 그대로 만든 index
  - Local secondary index = PK는 그대로, SK를 새로 지정한(e.g. 날짜 컬럼 순서) index
  - Global index = PK를 변경한 index

- DAX = Cache

- Read Consistency vs Write Consistency
  - CAP: 분산 환경에선 Partition tolerance는 자동 선택 -> CP or AP
    - CP: Strong Consistency / AP(default): Eventually Consistent
  - RCU = 초당 읽기 성능 / WCR = 초당 쓰기 성능
    - 최종 일관성: 4KB 당 0.5 RCU (2KB -> 0.5)
    - 강한 일관성: 4KB 당 1 RCU

- Provisioned vs On-demand
